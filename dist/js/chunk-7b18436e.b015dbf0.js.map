{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./src/views/Contact.vue?108f","webpack:///src/views/Contact.vue","webpack:///./src/views/Contact.vue?3edf","webpack:///./src/views/Contact.vue"],"names":["$","$entries","entries","target","stat","O","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","keys","length","i","result","call","push","module","exports","values","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$route","params","id","title","update","on","$event","preventDefault","_l","elm","_f","firstLetter","directives","name","rawName","value","contact","expression","attrs","domProps","composing","$set","onRemoveFieldClick","newFieldKey","newFieldVal","isDisableSave","onUpdateClick","onAddNewFieldClick","onCancelClick","canUndo","undo","staticRenderFns","data","newField","saveTimeout","computed","filterContact","Object","filter","methods","hasDuplicate","$store","dispatch","done","pop","activeTimeoutBtnSave","isCansel","splice","index","field","getContact","string","charAt","toUpperCase","slice","setTimeout","mixins","mounted","components","ContentFooter","component"],"mappings":"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","file":"js/chunk-7b18436e.b015dbf0.js","sourcesContent":["var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.github.io/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"header-head\"},[_c('div',{staticClass:\"breadcrumbs\"},[_vm._v(\"home / contacts / \"+_vm._s(_vm.$route.params.id))]),_c('h1',{staticClass:\"header-head__title\"},[_vm._v(_vm._s(_vm.title))])])]),_c('div',{staticClass:\"content-body\"},[_c('div',{staticClass:\"contacts-edit\"},[_c('h3',{staticClass:\"contacts-edit__title\"},[_vm._v(\"Редактировать\")]),_c('form',{key:_vm.update,staticClass:\"contacts-edit__form\",on:{\"submit\":function($event){$event.preventDefault();}}},[_vm._l((_vm.filterContact),function(elm,i){return _c('label',{key:elm[0] + i},[_c('p',[_vm._v(_vm._s(_vm._f(\"headers\")(_vm.firstLetter(elm[0]))))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.contact[elm[0]]),expression:\"contact[elm[0]]\"}],attrs:{\"type\":\"text\",\"name\":\"firstName\",\"placeholder\":\"Name\"},domProps:{\"value\":(_vm.contact[elm[0]])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.contact, elm[0], $event.target.value)}}}),_c('button',{staticClass:\"btni btn-danger\",on:{\"click\":function($event){return _vm.onRemoveFieldClick($event, elm)}}},[_c('fa-icon',{attrs:{\"icon\":['fa', 'trash']}})],1)])}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.newField),expression:\"newField\"}],staticClass:\"newField\"},[_c('label',[_c('p',[_vm._v(\"Новое поле\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newFieldKey),expression:\"newFieldKey\"}],attrs:{\"type\":\"text\",\"name\":\"new-field\",\"placeholder\":\"Значение поля\"},domProps:{\"value\":(_vm.newFieldKey)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newFieldKey=$event.target.value}}})]),_c('label',[_c('p',[_vm._v(\"Новое значение\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newFieldVal),expression:\"newFieldVal\"}],attrs:{\"type\":\"text\",\"name\":\"new-field-val\",\"placeholder\":\"Новое значение\"},domProps:{\"value\":(_vm.newFieldVal)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newFieldVal=$event.target.value}}})])]),_c('div',{staticClass:\"form-action\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.isDisableSave},on:{\"click\":_vm.onUpdateClick}},[_vm._v(\"Сохранить\")]),_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.onAddNewFieldClick}},[_vm._v(\"Добавить поле\")]),_c('button',{staticClass:\"btn btn-light\",attrs:{\"title\":\"Сброс редактирования и нового поля\"},on:{\"click\":_vm.onCancelClick}},[_vm._v(\"Отмена\")]),_c('button',{staticClass:\"btni btn-primary\",attrs:{\"title\":\"Отменить последнее изменение\",\"disabled\":_vm.canUndo},on:{\"click\":_vm.undo}},[_c('fa-icon',{attrs:{\"icon\":['fa', 'undo']}})],1)])],2)])]),_c('ContentFooter')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"content\">\n    <div class=\"header\">\n      <div class=\"header-head\">\n        <div class=\"breadcrumbs\">home / contacts / {{ $route.params.id }}</div>\n        <h1 class=\"header-head__title\">{{ title }}</h1>\n      </div>\n    </div>\n    <div class=\"content-body\">\n      <div class=\"contacts-edit\">\n        <h3 class=\"contacts-edit__title\">Редактировать</h3>\n        <form class=\"contacts-edit__form\" @submit.prevent :key=\"update\">\n          <label v-for=\"(elm, i) in filterContact\" :key=\"elm[0] + i\">\n            <p>{{ firstLetter(elm[0]) | headers }}</p>\n            <input type=\"text\" name=\"firstName\" v-model=\"contact[elm[0]]\" placeholder=\"Name\" />\n            <button class=\"btni btn-danger\" @click=\"onRemoveFieldClick($event, elm)\">\n              <fa-icon :icon=\"['fa', 'trash']\" />\n            </button>\n          </label>\n          <div class=\"newField\" v-show=\"newField\">\n            <label>\n              <p>Новое поле</p>\n              <input type=\"text\" name=\"new-field\" v-model=\"newFieldKey\" placeholder=\"Значение поля\" />\n            </label>\n            <label>\n              <p>Новое значение</p>\n              <input\n                type=\"text\"\n                name=\"new-field-val\"\n                v-model=\"newFieldVal\"\n                placeholder=\"Новое значение\"\n              />\n            </label>\n          </div>\n          <div class=\"form-action\">\n            <button\n              class=\"btn btn-primary\"\n              @click=\"onUpdateClick\"\n              :disabled=\"isDisableSave\"\n            >Сохранить</button>\n            <button class=\"btn btn-success\" @click=\"onAddNewFieldClick\">Добавить поле</button>\n            <button\n              class=\"btn btn-light\"\n              title=\"Сброс редактирования и нового поля\"\n              @click=\"onCancelClick\"\n            >Отмена</button>\n            <button\n              class=\"btni btn-primary\"\n              title=\"Отменить последнее изменение\"\n              @click=\"undo\"\n              :disabled=\"canUndo\"\n            >\n              <fa-icon :icon=\"['fa', 'undo']\" />\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n    <ContentFooter />\n  </div>\n</template>\n\n<script>\nimport ContentFooter from \"@/components/ContentFooter\";\nimport { mapGetters } from \"vuex\";\nimport undo from \"@/mixins/\";\n\nexport default {\n  name: \"contact\",\n  data() {\n    return {\n      title: \"\",\n      contact: {},\n      newField: false,\n      newFieldKey: \"\",\n      newFieldVal: null,\n      saveTimeout: null,\n      isDisableSave: true,\n      update: null\n    };\n  },\n  computed: {\n    ...mapGetters([\"getContact\"]),\n    filterContact() {\n      return Object.entries(this.contact).filter(\n        c => c[0] !== \"added\" && c[0] !== \"removed\" && c[0] !== \"id\"\n      );\n    }\n  },\n  methods: {\n    onUpdateClick() {\n      if (this.newFieldKey !== \"\" && this.newFieldVal !== null) {\n        if (!this.hasDuplicate(this.newFieldKey)) {\n          this.contact = {\n            ...this.contact,\n            [this.newFieldKey.toLowerCase()]: this.newFieldVal\n          };\n          this.$store.dispatch(\"addHeaders\", this.newFieldKey);\n        }\n      }\n\n      this.$store.dispatch(\"updateContact\", this.contact);\n      this.$store.dispatch(\"setNotification\", { page: \"contacts\", bool: true });\n\n      this.done.pop();\n      this.done.push({ ...this.contact });\n      this.title = this.contact.name;\n\n      this.newField = false;\n      this.newFieldKey = \"\";\n      this.newFieldVal = null;\n      this.activeTimeoutBtnSave();\n      this.update++;\n    },\n    onAddNewFieldClick() {\n      this.newField = !this.newField;\n      this.newFieldKey = \"\";\n      this.newFieldVal = null;\n    },\n    onRemoveFieldClick(e, field) {\n      let isCansel = confirm(\"Удалить поле?\");\n\n      if (isCansel) {\n        let index = this.filterContact.findIndex(i => i[0] === field[0]);\n\n        this.filterContact.splice(index, 1);\n        delete this.contact[field[0]];\n        this.update++;\n      }\n    },\n    onCancelClick() {\n      let isCansel = confirm(\"Отменить?\");\n\n      if (isCansel) {\n        this.newField = false;\n        this.contact = this.getContact(this.$route.params.id);\n      }\n    },\n    firstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    },\n    hasDuplicate(elm) {\n      let index = this.filterContact.findIndex(i => i[0] === elm.toLowerCase());\n      return index !== -1;\n    },\n    activeTimeoutBtnSave() {\n      this.isDisableSave = true;\n      this.saveTimeout = setTimeout(() => {\n        this.isDisableSave = false;\n      }, 1e3);\n    }\n  },\n  mixins: [undo],\n  mounted() {\n    this.contact = this.getContact(this.$route.params.id);\n    this.title = this.contact.name;\n    this.activeTimeoutBtnSave();\n  },\n  components: {\n    ContentFooter\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contact.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contact.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Contact.vue?vue&type=template&id=b120ffe6&\"\nimport script from \"./Contact.vue?vue&type=script&lang=js&\"\nexport * from \"./Contact.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}